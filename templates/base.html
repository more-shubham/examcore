{% load static %}
<!DOCTYPE html>
<html lang="en" class="h-full">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}{% if institution %}{{ institution.name }}{% else %}ExamCore{% endif %}{% endblock %}</title>
    <link rel="icon" type="image/svg+xml" href="{% static 'favicon.svg' %}">
    {% include 'components/base/_head_styles.html' %}
    {% block extra_css %}{% endblock %}
  </head>
  <body class="h-full bg-gray-50 flex flex-col">
  <!-- Fixed Header -->
    <nav class="fixed top-0 left-0 right-0 z-40 bg-white shadow-notion-sm h-16">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-full">
        <div class="flex justify-between h-full">
          <div class="flex items-center space-x-3">
            {% if institution.logo %}
              <img src="{{ institution.logo.url }}" alt="{{ institution.name }}" class="h-10 w-auto object-contain">
            {% endif %}
            <a href="{% url 'dashboards:home' %}" class="text-xl font-bold text-gray-900">{% if institution %}{{ institution.name }}{% else %}ExamCore{% endif %}</a>
          </div>
          <div class="flex items-center space-x-4">
            {% if user.is_authenticated %}
              <span class="text-sm text-gray-600">{{ user.get_full_name|default:user.username }}</span>
              <form method="post" action="{% url 'auth:logout' %}" class="inline">
                {% csrf_token %}
                <button type="submit" class="inline-flex items-center px-3 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors">
                  Logout
                </button>
              </form>
            {% else %}
              <a href="{% url 'auth:login' %}" class="inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-lg hover:bg-primary-700 transition-colors">
                Sign In
              </a>
            {% endif %}
          </div>
        </div>
      </div>
    </nav>

  <!-- Main Content Area -->
    <div class="flex-1 pt-16 pb-14">
    <!-- Messages -->
      {% if messages %}
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-4">
          {% for message in messages %}
            <div class="alert {% if message.tags == 'error' %}alert-error{% elif message.tags == 'success' %}alert-success{% elif message.tags == 'warning' %}alert-warning{% else %}alert-info{% endif %}">
              {{ message }}
            </div>
          {% endfor %}
        </div>
      {% endif %}

    <!-- Main Content -->
      <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
        {% block content %}{% endblock %}
      </main>
    </div>

  <!-- Fixed Footer -->
    <footer class="fixed bottom-0 left-0 right-0 z-40 bg-white shadow-notion-sm h-14">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-full flex items-center justify-center">
        <p class="text-sm text-gray-500">&copy; {% now "Y" %} {% if institution %}{{ institution.name }}{% else %}ExamCore{% endif %}. All rights reserved.</p>
      </div>
    </footer>

    {% block extra_js %}{% endblock %}
  </body>
</html>
