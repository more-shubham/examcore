{% extends 'base_auth.html' %}

{% block title %}Reset Password - ExamCore{% endblock %}

{% block content %}
  <div class="bg-white rounded-xl shadow-sm border border-gray-100 p-8">
  <!-- Header -->
    <div class="text-center mb-8">
      {% if institution.logo %}
        <img src="{{ institution.logo.url }}" alt="{{ institution.name }}" class="mx-auto h-16 w-16 object-contain mb-4">
      {% endif %}
      <h2 class="text-2xl font-bold text-gray-900">Reset Password</h2>
      <p class="mt-2 text-gray-600">Enter the OTP sent to <strong>{{ email }}</strong></p>
    </div>

  <!-- Form Errors -->
    {% if form.non_field_errors %}
      <div class="alert-error mb-6">
        {{ form.non_field_errors.0 }}
      </div>
    {% endif %}

  <!-- Reset Password Form -->
    <form method="post" class="space-y-5">
      {% csrf_token %}

      <div>
        <label for="id_otp" class="form-label">OTP Code</label>
        {{ form.otp }}
        {% if form.otp.errors %}
          <p class="field-error">{{ form.otp.errors.0 }}</p>
        {% endif %}
      </div>

      <div>
        <label for="id_password" class="form-label">New Password</label>
        {{ form.password }}
        {% if form.password.errors %}
          <p class="field-error">{{ form.password.errors.0 }}</p>
        {% endif %}
      </div>

      <div>
        <label for="id_confirm_password" class="form-label">Confirm Password</label>
        {{ form.confirm_password }}
        {% if form.confirm_password.errors %}
          <p class="field-error">{{ form.confirm_password.errors.0 }}</p>
        {% endif %}
      </div>

      <button type="submit" class="btn-primary">
        Reset Password
      </button>
    </form>

  <!-- Back to Login -->
    <div class="mt-6 text-center">
      <a href="{% url 'auth:login' %}" class="btn-link">Back to Sign In</a>
    </div>
  </div>
{% endblock %}
